<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>E-commerece Website</title>
    <link href="styles.css" rel="stylesheet">
    <!-- bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
    <!-- bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <!-- Remix Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/remixicon/4.6.0/remixicon.css">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css">
    <!-- Swiper Slider CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/11.0.5/swiper-bundle.css">

</head>

<body>

    <!-- Navigation Bar -->
    <div class="nav-container">
        <!-- Top bar -->
        <div class="p-1 d-none d-lg-block border">
            <div class="container">
                <div class="row align-items-center">
                    <div class="col-md-4 text-start ps-4 top-bar-text text-dark">
                        <i class="bi bi-phone text-dark"></i> +(01) - 9177 - 5985-21 &nbsp; | &nbsp;
                        <i class="bi bi-geo-alt"></i> Our location
                    </div>
                    <div class="col-md-4 text-center text-secondary">
                        Get great devices up to 50% off
                    </div>
                    <div class="col-md-4 text-center text-secondary">
                        <span class="me-3 top-bar-text"><i class="bi bi-globe-americas"></i> English</span>
                        <a href="login.html" class="top-bar-text text-dark text-decoration-none">
                            <i class="bi bi-person"></i>
                            Login</a> / <a href="register.html"
                            class="top-bar-text text-dark text-decoration-none">Sign in</a>

                    </div>
                </div>
            </div>
        </div>
        <!-- Search & Categories -->
        <div class="container my-3 gap-5 middle-navbar d-flex justify-content-between align-items-center">
            <a href="index.html" class="navbar-brand logo">Sudha<span>diFy</span></a>
            <div class="input-group search-box d-none d-lg-flex">
                <input type="text" class="form-control" placeholder="Search Products.....">
                <button class="btn btn-outline-secondary"><i class="bi bi-search"></i></button>
            </div>
            <div class="d-flex align-items-center d-none d-lg-flex gap-2">
                <a href="wishlist.html" class="me-3 text-dark middle-navbar-a text-decoration-none position-relative">
                    <i class="bi bi-heart fs-3"></i> <span
                        class="position-absolute text-white d-flex align-items-center justify-content-center wishlist-span quont-span">0</span>
                </a>
                <a href="cart.html" class="me-3 text-dark middle-navbar-a text-decoration-none position-relative">
                    <i class="bi bi-bag fs-3"></i> <span
                        class="position-absolute text-white d-flex align-items-center justify-content-center wishlist-span quont-span">0</span>
                </a>
            </div>
            <!-- Sidebar Toggle button -->
            <button class="btn btn-primary sidebar-menu-toggler d-block d-lg-none" type="button"
                data-bs-toggle="offcanvas" data-bs-target="#sidebar">
                <i class="bi bi-list"></i>Menu
            </button>
        </div>
        <!-- Navbar -->
        <nav class="navbar navbar-expand-lg bg-white py-3 d-none d-lg-block">
            <div class="container">
                <div class="collaspe navbar-collaspe" id="navbarNav">
                    <ul class="navbar-nav nav-menu">
                        <li class="nav-item"><a href="index.html" class="nav-link">Home</a></li>
                        <li class="nav-item"><a href="about.html" class="nav-link">About Us</a></li>
                        <li class="nav-item"><a href="shop.html" class="nav-link">Shop</a></li>
                        <li class="nav-item"><a href="blog.html" class="nav-link">Blog</a></li>
                        <li class="nav-item"><a href="contact.html" class="nav-link">Contact Us</a></li>
                    </ul>
                </div>
                <a href="#" class="text-primary text-decoration-none text-dark"><i class="bi bi-headset"></i>Hotline
                    <span>1900 - 888</span></a>
            </div>
        </nav>

        <!-- Sidebar (offcanvas) -->
        <div class="offcanvas offcanvas-start" tabindex="-1" id="sidebar">
            <div class="offcanvas-header">
                <a href="index.html" class="navbar-brand logo">Sudha<span>diFy</span></a>
                <button type="button" class="btn-close" data-bs-dismiss="offcanvas"></button>
            </div>
            <div class="offcanvas-body d-flex flex-column">
                <div class="container my-5 gap-4 d-flex justify-content-between align-items-center">
                    <div class="input-group search-box">
                        <input type="text" class="form-control" placeholder="Search Products.....">
                        <button class="btn btn-outline-secondary"><i class="bi bi-search"></i></button>
                    </div>
                </div>
                <!-- Sidebar Menu -->
                <ul class="navbar-nav nav-menu">
                    <li class="nav-item"><a href="index.html" class="nav-link">Home</a></li>
                    <li class="nav-item"><a href="about.html" class="nav-link">About Us</a></li>
                    <li class="nav-item"><a href="shop.html" class="nav-link">Shop</a></li>
                    <li class="nav-item"><a href="blog.html" class="nav-link">Blog</a></li>
                    <li class="nav-item"><a href="contact.html" class="nav-link">Contact Us</a></li>
                </ul>
                <!-- Social Icon -->
                <div class="mt-auto d-flex justify-content-around nav-social">
                    <i class="bi bi-facebook fs-3"></i>
                    <i class="bi bi-twitter fs-3"></i>
                    <i class="bi bi-linkedin fs-3"></i>
                    <i class="bi bi-instagram fs-3"></i>
                </div>
            </div>
        </div>
    </div>

    <!-- Page Section -->
    <div class="page-section pt-3">
        <div class="container">
            <div class="row">
                <div class="d-flex align-items-center gap-3">
                    <p>
                        <a href="index.html" class="text-dark text-decoration-none">Home &nbsp; > </a>
                    <p class="text-secondary">Wishlist</p>
                    </p>
                </div>
            </div>
        </div>
    </div>

    <!-- Wishlist  -->
    <div class="container wishlist py-5">
        <div class="row">
            <div class="col-12">
                <h2 class="whishlist-title">My Wishlist</h2>
            </div>
        </div>
        <div class="row">
            <div class="col-12">
                <div class="table-responsive whishlist-wrapper">
                    <table class="table align-middle">
                        <thead class="tab-light">
                            <tr>
                                <th class="text-center fw-normal">Product</th>
                                <th class="text-end fw-normal">Price</th>
                                <th class="text-end fw-normal d-none d-md-table-cell">Stock Status</th>
                                <th class="text-end fw-normal d-none d-md-table-cell">Action</th>
                                <th class="text-end fw-normal">Remove</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- list 1  -->
                            <tr>
                                <td class="d-flex align-items-center gap-3">
                                    <img src="image/product-1-1.jpg" class="img-fluid rounded" width="80" alt="">
                                    <div>
                                        <h6 class="mb-1">J. Crew Mercantile Women's Short-sleeve</h6>
                                        <p class="mb-0 text-muted">Short description here</p>
                                    </div>
                                </td>
                                <td class="text-end text-secondary">$65.00</td>
                                <td class="text-center text-success d-none d-md-table-cell">In Stock</td>
                                <td class="text-center d-none d-md-table-cell">
                                    <button class="btn btn-success wishlist-btn py-2 btn-sm">
                                        <i class="bi bi-cart"></i> Add To Cart
                                    </button>
                                </td>
                                <td class="text-center">
                                    <i class="bi bi-trash text-secondary" role="button"></i>
                                </td>
                            </tr>
                            <!-- list 2  -->
                            <tr>
                                <td class="d-flex align-items-center gap-3">
                                    <img src="image/product-1-1.jpg" class="img-fluid rounded" width="80" alt="">
                                    <div>
                                        <h6 class="mb-1">J. Crew Mercantile Women's Short-sleeve</h6>
                                        <p class="mb-0 text-muted">Short description here</p>
                                    </div>
                                </td>
                                <td class="text-end text-secondary">$65.00</td>
                                <td class="text-center text-success d-none d-md-table-cell">In Stock</td>
                                <td class="text-center d-none d-md-table-cell">
                                    <button class="btn btn-success wishlist-btn py-2 btn-sm">
                                        <i class="bi bi-cart"></i> Add To Cart
                                    </button>
                                </td>
                                <td class="text-center">
                                    <i class="bi bi-trash text-secondary" role="button"></i>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>



    <!-- bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js"></script>
    <!-- Swiper Slider JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/11.0.5/swiper-bundle.min.js"></script>
    <script src="products.js"></script>
    <script src="script.js"></script>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const wishlistTableBody = document.querySelector('.whishlist-wrapper tbody');

            function loadWishlist() {
                let wishlist = JSON.parse(localStorage.getItem('wishlist')) || [];
                wishlistTableBody.innerHTML = '';

                if(wishlist.length === 0) {
    wishlistTableBody.innerHTML = `<tr><td colspan='5' class='text-center text-muted'>No items in wishlist.</td></tr>`;
    return;
}

                wishlist.forEach(product => {
                    let row = document.createElement(`tr`);

                    row.innerHTML = `<td class="d-flex align-items-center gap-3">
                                    <img src="${product.image}" class="img-fluid rounded" width="80" alt="${product.name}">
                                    <div>
                                        <h6 class="mb-1">${product.name}</h6>
                                        <p class="mb-0 text-muted">Short description here</p>
                                    </div>
                                </td>
                                <td class="text-end text-secondary">$${product.price}</td>
                                <td class="text-center text-success d-none d-md-table-cell">In Stock</td>
                                <td class="text-center d-none d-md-table-cell">
                                    <button class="btn btn-success wishlist-btn py-2 btn-sm" data-id="${product.productId}">
                                        <i class="bi bi-cart"></i> Add To Cart
                                    </button>
                                </td>
                                <td class="text-center">
                                    <i class="bi bi-trash text-secondary remove-from-whishlist" data-id="${product.productId}" role='button'></i>
                                </td>
                            </tr>`;

                            wishlistTableBody.appendChild(row);
                    
                });
                console.log('Wishlist Loaded', wishlist);
            }
            document.addEventListener('click', function(event){
                if(event.target.closest('.remove-from-whishlist')){
                    let productId = event.target.closest('.remove-from-whishlist').dataset.id;
                    let wishlist = JSON.parse(localStorage.getItem('wishlist')) || [];
                    wishlist = wishlist.filter(item=> item.productId !== productId);
                    localStorage.setItem('wishlist', JSON.stringify(wishlist));
                    loadWishlist();
                }
            });

            document.addEventListener('click', function(event){
                if(event.target.closest('.wishlist-btn')) {
                    let productId = event.target.closest('.wishlist-btn').dataset.id;
                    let wishlist = JSON.parse(localStorage.getItem("wishlist")) || [];
                    let cart = JSON.parse(localStorage.getItem('cart')) || [];
                    let product = wishlist.find(item => item.productId === productId);

                    if(product){
                        cart.push(product);
                        localStorage.setItem('cart', JSON.stringify(cart));
                        alert(`"${product.name}" Added To Cart!`);
                        window.location.href = 'cart.html';
                    }

                }
            });
            loadWishlist();
        });
    </script>


</body>

</html>