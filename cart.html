<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>E-commerece Website</title>
    <link href="styles.css" rel="stylesheet">
    <!-- bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
    <!-- bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <!-- Remix Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/remixicon/4.6.0/remixicon.css">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css">
    <!-- Swiper Slider CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/11.0.5/swiper-bundle.css">

</head>

<body>

    <!-- Navigation Bar -->
    <div class="nav-container">
        <!-- Top bar -->
        <div class="p-1 d-none d-lg-block border">
            <div class="container">
                <div class="row align-items-center">
                    <div class="col-md-4 text-start ps-4 top-bar-text text-dark">
                        <i class="bi bi-phone text-dark"></i> +(01) - 9177 - 5985-21 &nbsp; | &nbsp;
                        <i class="bi bi-geo-alt"></i> Our location
                    </div>
                    <div class="col-md-4 text-center text-secondary">
                        Get great devices up to 50% off
                    </div>
                    <div class="col-md-4 text-center text-secondary">
                        <span class="me-3 top-bar-text"><i class="bi bi-globe-americas"></i> English</span>
                        <a href="login.html" class="top-bar-text text-dark text-decoration-none">
                            <i class="bi bi-person"></i>
                            Login</a> / <a href="register.html"
                            class="top-bar-text text-dark text-decoration-none">Sign in</a>

                    </div>
                </div>
            </div>
        </div>
        <!-- Search & Categories -->
        <div class="container my-3 gap-5 middle-navbar d-flex justify-content-between align-items-center">
            <a href="index.html" class="navbar-brand logo">Sudha<span>diFy</span></a>
            <div class="input-group search-box d-none d-lg-flex">
                <input type="text" class="form-control" placeholder="Search Products.....">
                <button class="btn btn-outline-secondary"><i class="bi bi-search"></i></button>
            </div>
            <div class="d-flex align-items-center d-none d-lg-flex gap-2">
                <a href="wishlist.html" class="me-3 text-dark middle-navbar-a text-decoration-none position-relative">
                    <i class="bi bi-heart fs-3"></i> <span
                        class="position-absolute text-white d-flex align-items-center justify-content-center wishlist-span quont-span">0</span>
                </a>
                <a href="cart.html" class="me-3 text-dark middle-navbar-a text-decoration-none position-relative">
                    <i class="bi bi-bag fs-3"></i> <span
                        class="position-absolute text-white d-flex align-items-center justify-content-center wishlist-span quont-span">0</span>
                </a>
            </div>
            <!-- Sidebar Toggle button -->
            <button class="btn btn-primary sidebar-menu-toggler d-block d-lg-none" type="button"
                data-bs-toggle="offcanvas" data-bs-target="#sidebar">
                <i class="bi bi-list"></i>Menu
            </button>
        </div>
        <!-- Navbar -->
        <nav class="navbar navbar-expand-lg bg-white py-3 d-none d-lg-block">
            <div class="container">
                <div class="collaspe navbar-collaspe" id="navbarNav">
                    <ul class="navbar-nav nav-menu">
                        <li class="nav-item"><a href="index.html" class="nav-link">Home</a></li>
                        <li class="nav-item"><a href="about.html" class="nav-link">About Us</a></li>
                        <li class="nav-item"><a href="shop.html" class="nav-link">Shop</a></li>
                        <li class="nav-item"><a href="blog.html" class="nav-link">Blog</a></li>
                        <li class="nav-item"><a href="contact.html" class="nav-link">Contact Us</a></li>
                    </ul>
                </div>
                <a href="#" class="text-primary text-decoration-none text-dark"><i class="bi bi-headset"></i>Hotline
                    <span>1900 - 888</span></a>
            </div>
        </nav>

        <!-- Sidebar (offcanvas) -->
        <div class="offcanvas offcanvas-start" tabindex="-1" id="sidebar">
            <div class="offcanvas-header">
                <a href="index.html" class="navbar-brand logo">Sudha<span>diFy</span></a>
                <button type="button" class="btn-close" data-bs-dismiss="offcanvas"></button>
            </div>
            <div class="offcanvas-body d-flex flex-column">
                <div class="container my-5 gap-4 d-flex justify-content-between align-items-center">
                    <div class="input-group search-box">
                        <input type="text" class="form-control" placeholder="Search Products.....">
                        <button class="btn btn-outline-secondary"><i class="bi bi-search"></i></button>
                    </div>
                </div>
                <!-- Sidebar Menu -->
                <ul class="navbar-nav nav-menu">
                    <li class="nav-item"><a href="index.html" class="nav-link">Home</a></li>
                    <li class="nav-item"><a href="about.html" class="nav-link">About Us</a></li>
                    <li class="nav-item"><a href="shop.html" class="nav-link">Shop</a></li>
                    <li class="nav-item"><a href="blog.html" class="nav-link">Blog</a></li>
                    <li class="nav-item"><a href="contact.html" class="nav-link">Contact Us</a></li>
                </ul>
                <!-- Social Icon -->
                <div class="mt-auto d-flex justify-content-around nav-social">
                    <i class="bi bi-facebook fs-3"></i>
                    <i class="bi bi-twitter fs-3"></i>
                    <i class="bi bi-linkedin fs-3"></i>
                    <i class="bi bi-instagram fs-3"></i>
                </div>
            </div>
        </div>
    </div>

    <!-- Page Section -->
    <div class="page-section pt-3">
        <div class="container">
            <div class="row">
                <div class="d-flex align-items-center gap-3">
                    <p>
                        <a href="index.html" class="text-dark text-decoration-none">Home &nbsp; > </a>
                    <p class="text-secondary">Shopping Cart</p>
                    </p>
                </div>
            </div>
        </div>
    </div>

     <!-- Shopping Cart -->
      <div class="container py-5">
        <div class="row">
            <div class="col-lg-12">
                <h2 class="mb-4">Shopping Cart</h2>
                <div class="table-responsive product-cart-wrapper">
                    <table class="table align-middle">
                        <thead class="table-light">
                            <tr>
                                <th class="fw-normal">Product</th>
                                <th class="text-end fw-normal">Price</th>
                                <th class="text-end fw-normal d-none d-md-table-cell">Quantity</th>
                                <th class="text-end fw-normal">Subtotle</th>
                                <th class="text-center fw-normal">Price</th>
                            </tr>
                        </thead>
                        <tbody id="cartBody">
                            <!-- Cart Item -->

                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        <div class="row mt-5">
            <div class="col-lg-12">
                <div class="card p-4 totle-product-price-wrap shadow-sm border">
                    <h4 class="mb-3 fw-semibold">Cart Totles</h4>
                        <table class="table">
                            <tbody>
                                <tr>
                                    <td>Cart Subtotle</td>
                                    <td class="text-end text-successq cart-subtotle">$0.00</td>
                                </tr>
                                <tr>
                                    <td>Shipping</td>
                                    <td class="text-end">Free Shipping</td>
                                </tr>
                                <tr>
                                    <td class="fw-semibold">Totle</td>
                                    <td class="text-end text-successq cart-totle">$0.00</td>
                                </tr>
                            </tbody>
                        </table>
                        <a href="checkout.html" class="btn bg-prim-color text-white w-100 mt-3">
                            <i class="bi bi-credit-card"></i> Proceed To Checkout
                        </a>
                </div>
            </div>
        </div>
      </div>

   



    <!-- bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js"></script>
    <!-- Swiper Slider JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/11.0.5/swiper-bundle.min.js"></script>
    <script src="products.js"></script>
    <script src="script.js"></script>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            loadCartItem();
            updateCheckoutTotlal();
        });
        function loadCartItem() {
        let cart = JSON.parse(localStorage.getItem('cart')) || [];
        let cartBody = document.getElementById('cartBody');
        let cartSubtotleElement = document.querySelector('.cart-subtotle');
        let cartTotleElement = document.querySelector('.cart-totle');
        let totalPrice = 0;

        if(!cartBody) return;

        cartBody.innerHTML = "";

        if(cart.length === 0){
            cartBody.innerHTML = `<tr><td colspan="5" class="text-center">Your Cart is Empty.</td></tr>`;
            cartSubtotleElement.textContent = '$0.00';
            cartTotleElement.textContent = '$0.00';
            return;
        }
        cart.forEach((item, index) => {
            let price = parseFloat(item.price.toString().replace(/[^\d.]/g, "")) || 0;
            let quantity = parseInt(item.quantity) || 1;
            let subtotal = price * quantity;
            totalPrice += subtotal;

            let cartRow = document.createElement('tr');
            cartRow.innerHTML = `
                <td>
                    <div class="d-flex align-items-center">
                        <img src="${item.image}" alt="${item.name}" width="80" class="me-3">
                        <span>${item.name}</span>
                    </div>
                </td>
                <td class="text-end f-price">$${price.toFixed(2)}</td>
                <td class="text-enter">
                 <input type='number' class="form-control text-center cart-quantity" data-index="${index}" value="${quantity}" min="1" style="width:60px">    
                </td>
                <td class="text-end s-price">$${subtotal.toFixed(2)}</td>
                <td class="text-end">
                 <button class="btn btn-danger btn-sm remove-item" data-index="${index}">&times;</button>
                </td>
            `;
        
            cartBody.appendChild(cartRow);
        });
        cartSubtotleElement.textContent = `$${totalPrice.toFixed(2)}`;
        cartTotleElement.textContent = `$${totalPrice.toFixed(2)}`;

        attachCarEventListeners();
        updateCheckoutTotlal();
        }

        function attachCarEventListeners() {
            document.querySelectorAll('.cart-quantity').forEach(input => {
                input.addEventListener('change', function () {
                    updateCartQuantity(this.dataset.index, this.value);
                });
            });
            document.querySelectorAll('.remove-item').forEach(button => {
                button.addEventListener('click', () =>{
                    removeCartItem(button.dataset.index);
                });
            });
        }

        function updateCartQuantity(index, newQuantity) {
    let cart = JSON.parse(localStorage.getItem("cart")) || [];
    if (newQuantity < 1) return;
    cart[index].quantity = parseInt(newQuantity);
    localStorage.setItem("cart", JSON.stringify(cart));
    loadCartItem();
}


        function removeCartItem(index){
            let cart = JSON.parse(localStorage.getItem('cart')) || [];
            cart.splice(index, 1);
            localStorage.setItem('cart', JSON.stringify(cart));
            loadCartItem();
        }

        function updateCheckoutTotlal() {
    let cart = JSON.parse(localStorage.getItem('cart')) || [];
    let cartSubtotleElement = document.querySelector('.cart-subtotle');
    let cartTotleElement = document.querySelector('.cart-totle');
    let totalPrice = 0;

    cart.forEach(item => {
        let price = parseFloat(item.price.toString().replace(/[^\d.]/g, "")) || 0;
        let quantity = parseInt(item.quantity) || 1;
        totalPrice += price * quantity;
    });

    if (cartSubtotleElement && cartTotleElement) {
        cartSubtotleElement.textContent = `$${totalPrice.toFixed(2)}`;
        cartTotleElement.textContent = `$${totalPrice.toFixed(2)}`;
    }
}


    </script>


</body>

</html>